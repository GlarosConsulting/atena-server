// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  url = "***"
}

generator client {
  provider = "prisma-client-js"
}

model Agreement {
  @@map(name: "agreements")

  id                  String              @default(uuid()) @id
  agreementId         String
  uf                  String
  city                String
  name                String
  status              String
  start               DateTime
  end                 DateTime
  program             String
  proposalData        ProposalData
  workPlan            WorkPlan
  convenientExecution ConvenientExecution

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
}

model ProposalData {
  @@map(name: "proposals_data")

  id           String       @default(uuid()) @id
  agreement    Agreement?   @relation(fields: [agreementId], references: [id])
  agreementId  String?
  data         Data?
  programs     Program[]
  participants Participants?
}

model Data {
  @@map(name: "agreements_data")

  id                            String        @default(uuid()) @id
  proposalData                  ProposalData? @relation(fields: [proposalDataId], references: [id])
  proposalDataId                String?
  modality                      String?
  contractingStatus             String?
  status                        Status
  proposalId                    String?
  organId                       String?
  proccessId                    String?
  proponent                     String?
  legalFoundation               String?
  organ                         String?
  linkedOrgan                   String?
  description                   String?
  justification                 String?
  targetAudience                String?
  problem                       String?
  result                        String?
  proposalAndObjectivesRelation String?
  categories                    String?
  object                        String?
  information                   String?
  proposalDate                  DateTime?
  biddingDate                   DateTime?
  homologationDate              DateTime?
}

model Status {
  @@map(name: "status")

  id          String  @default(uuid()) @id
  data        Data?   @relation(fields: [dataId], references: [id])
  dataId      String?
  value       String?
  committed   String?
  publication String?
}

model Program {
  @@map(name: "programs")

  id             String        @default(uuid()) @id
  programId      Int
  proposalData   ProposalData? @relation(fields: [proposalDataId], references: [id])
  proposalDataId String?
  name           String?
  value          Float?        @default(0)
}

model Participants {
  @@map(name: "participants")

  id             String        @default(uuid()) @id
  proposalData   ProposalData? @relation(fields: [proposalDataId], references: [id])
  proposalDataId String?
  proponent      String
  respProponent  String
  grantor        String
  respGrantor    String
}

model WorkPlan {
  @@map(name: "work_plans")

  id                          String                      @default(uuid()) @id
  agreement                   Agreement?                  @relation(fields: [agreementId], references: [id])
  agreementId                 String?
  physicalChrono              PhysicalChrono
  disbursementChrono          DisbursementChrono
  detailedApplicationPlan     DetailedApplicationPlan
  consolidatedApplicationPlan ConsolidatedApplicationPlan
  attachments                 Attachments
  notions                     Notions
}

model PhysicalChrono {
  @@map(name: "physical_chronos")

  id         String               @default(uuid()) @id
  workPlan   WorkPlan?            @relation(fields: [workPlanId], references: [id])
  workPlanId String?
  list       PhysicalChronoItem[]
  values     PhysicalChronoValues
}

model PhysicalChronoItem {
  @@map(name: "physical_chrono_items")

  id               String          @default(uuid()) @id
  physicalChrono   PhysicalChrono? @relation(fields: [physicalChronoId], references: [id])
  physicalChronoId String?
  goalId           Int?
  specification    String?
  value            Float?          @default(0)
  startDate        DateTime?
  endDate          DateTime?
  income           String?
}

model PhysicalChronoValues {
  @@map(name: "physical_chrono_values")

  id               String          @default(uuid()) @id
  physicalChrono   PhysicalChrono? @relation(fields: [physicalChronoId], references: [id])
  physicalChronoId String?
  registered       Float?          @default(0)
  register         Float?          @default(0)
  global           Float?          @default(0)
}

model DisbursementChrono {
  @@map(name: "disbursement_chronos")

  id         String                   @default(uuid()) @id
  workPlan   WorkPlan?                @relation(fields: [workPlanId], references: [id])
  workPlanId String?
  list       DisbursementChronoItem[]
  values     DisbursementChronoValues
}

model DisbursementChronoItem {
  @@map(name: "disbursement_chrono_item")

  id                   String              @default(uuid()) @id
  disbursementChrono   DisbursementChrono? @relation(fields: [disbursementChronoId], references: [id])
  disbursementChronoId String?
  portionId            Int?
  type                 String?
  month                String?
  year                 Int?
  value                Float?              @default(0)
}

model DisbursementChronoValues {
  @@map(name: "disbursement_chrono_values")

  id                   String                  @default(uuid()) @id
  disbursementChrono   DisbursementChrono?     @relation(fields: [disbursementChronoId], references: [id])
  disbursementChronoId String?
  registered           DisbursementChronoValue @relation("RegisteredDisbursementChronoValue")
  register             DisbursementChronoValue @relation("RegisterDisbursementChronoValue")
  total                DisbursementChronoValue @relation("TotalDisbursementChronoValue")
}

model DisbursementChronoValue {
  @@map(name: "disbursement_chrono_value")

  id                String                    @default(uuid()) @id
  registeredValue   DisbursementChronoValues? @relation("RegisteredDisbursementChronoValue", fields: [registeredValueOf], references: [id])
  registeredValueOf String?
  registerValue     DisbursementChronoValues? @relation("RegisterDisbursementChronoValue", fields: [registerValueOf], references: [id])
  registerValueOf   String?
  totalValue        DisbursementChronoValues? @relation("TotalDisbursementChronoValue", fields: [totalValueOf], references: [id])
  totalValueOf      String?
  granting          Float?                    @default(0)
  convenient        Float?                    @default(0)
  yield             Float?                    @default(0)
}

model DetailedApplicationPlan {
  @@map(name: "detailed_application_plans")

  id         String                        @default(uuid()) @id
  workPlan   WorkPlan?                     @relation(fields: [workPlanId], references: [id])
  workPlanId String?
  list       DetailedApplicationPlanItem[]
  values     DetailedApplicationPlanValues
}

model DetailedApplicationPlanItem {
  @@map(name: "detailed_application_plan_items")

  id                        String                   @default(uuid()) @id
  detailedApplicationPlan   DetailedApplicationPlan? @relation(fields: [detailedApplicationPlanId], references: [id])
  detailedApplicationPlanId String?
  type                      String?
  description               String?
  natureExpenseCode         Int?
  natureAcquisition         String?
  un                        String?
  amount                    Float?                   @default(0)
  unitValue                 Float?                   @default(0)
  totalValue                Float?                   @default(0)
  status                    String?
}

model DetailedApplicationPlanValues {
  @@map(name: "detailed_application_plan_values")

  id                        String                       @default(uuid()) @id
  detailedApplicationPlan   DetailedApplicationPlan?     @relation(fields: [detailedApplicationPlanId], references: [id])
  detailedApplicationPlanId String?
  assets                    DetailedApplicationPlanValue @relation("AssetsDetailedApplicationPlanValue")
  tributes                  DetailedApplicationPlanValue @relation("TributesDetailedApplicationPlanValue")
  construction              DetailedApplicationPlanValue @relation("ConstructionDetailedApplicationPlanValue")
  services                  DetailedApplicationPlanValue @relation("ServicesDetailedApplicationPlanValue")
  others                    DetailedApplicationPlanValue @relation("OthersDetailedApplicationPlanValue")
  administrative            DetailedApplicationPlanValue @relation("AdministrativeDetailedApplicationPlanValue")
  total                     DetailedApplicationPlanValue @relation("TotalDetailedApplicationPlanValue")
}

model DetailedApplicationPlanValue {
  @@map(name: "detailed_application_plan_value")

  id                    String                         @default(uuid()) @id
  assetsValue           DetailedApplicationPlanValues? @relation("AssetsDetailedApplicationPlanValue", fields: [assetsValueOf], references: [id])
  assetsValueOf         String?
  tributesValue         DetailedApplicationPlanValues? @relation("TributesDetailedApplicationPlanValue", fields: [tributesValueOf], references: [id])
  tributesValueOf       String?
  constructionValue     DetailedApplicationPlanValues? @relation("ConstructionDetailedApplicationPlanValue", fields: [constructionValueOf], references: [id])
  constructionValueOf   String?
  servicesValue         DetailedApplicationPlanValues? @relation("ServicesDetailedApplicationPlanValue", fields: [servicesValueOf], references: [id])
  servicesValueOf       String?
  othersValue           DetailedApplicationPlanValues? @relation("OthersDetailedApplicationPlanValue", fields: [othersValueOf], references: [id])
  othersValueOf         String?
  administrativeValue   DetailedApplicationPlanValues? @relation("AdministrativeDetailedApplicationPlanValue", fields: [administrativeValueOf], references: [id])
  administrativeValueOf String?
  totalValue            DetailedApplicationPlanValues? @relation("TotalDetailedApplicationPlanValue", fields: [totalValueId], references: [id])
  totalValueId          String?
  total                 Float?                         @default(0)
  resource              Float?                         @default(0)
  counterpart           Float?                         @default(0)
  yield                 Float?                         @default(0)
}

model ConsolidatedApplicationPlan {
  @@map(name: "consolidated_application_plans")

  id         String                            @default(uuid()) @id
  workPlan   WorkPlan?                         @relation(fields: [workPlanId], references: [id])
  workPlanId String?
  list       ConsolidatedApplicationPlanItem[] @relation("ListConsolidatedApplicationPlanItems")
  total      ConsolidatedApplicationPlanItem   @relation("TotalConsolidatedApplicationPlanItems")
}

model ConsolidatedApplicationPlanItem {
  @@map(name: "consolidated_application_plan_items")

  id             String                        @default(uuid()) @id
  listItem       ConsolidatedApplicationPlan[] @relation("ListConsolidatedApplicationPlanItems", fields: [listItemOf], references: [id])
  listItemOf     String?
  totalItem      ConsolidatedApplicationPlan?  @relation("TotalConsolidatedApplicationPlanItems", fields: [totalItemOf], references: [id])
  totalItemOf    String?
  classification String?
  resources      Float?                        @default(0)
  counterpart    Float?                        @default(0)
  yield          Float?                        @default(0)
  total          Float?                        @default(0)
}

model Attachments {
  @@map(name: "attachments")

  id            String       @default(uuid()) @id
  workPlan      WorkPlan?    @relation(fields: [workPlanId], references: [id])
  workPlanId    String?
  proposalList  Attachment[] @relation("ProposalAttachments")
  executionList Attachment[] @relation("ExecutionAttachments")
}

model Attachment {
  @@map(name: "attachment")

  id                    String        @default(uuid()) @id
  proposalAttachment    Attachments[] @relation("ProposalAttachments", fields: [proposalAttachmentOf], references: [id])
  proposalAttachmentOf  String?
  executionAttachment   Attachments[] @relation("ExecutionAttachments", fields: [executionAttachmentOf], references: [id])
  executionAttachmentOf String?
  name                  String?
  description           String?
  date                  DateTime?
}

model Notions {
  @@map(name: "notions")

  id           String       @default(uuid()) @id
  workPlan     WorkPlan?    @relation(fields: [workPlanId], references: [id])
  workPlanId   String?
  proposalList NotionItem[] @relation("ProposalNotionItems")
  workPlanList NotionItem[] @relation("WorkPlanNotionItems")
}

model NotionItem {
  @@map(name: "notion_item")

  id                    String    @default(uuid()) @id
  proposalNotionItem    Notions[] @relation("ProposalNotionItems", fields: [proposalNotionItemOf], references: [id])
  proposalNotionItemOf  String?
  executionNotionItem   Notions[] @relation("WorkPlanNotionItems", fields: [executionNotionItemOf], references: [id])
  executionNotionItemOf String?
  date                  DateTime?
  type                  String?
  responsible           String?
  assignment            String?
  occupation            String?
}

model ConvenientExecution {
  @@map(name: "convenient_execution")

  id                 String             @default(uuid()) @id
  agreement          Agreement?         @relation(fields: [agreementId], references: [id])
  agreementId        String?
  executionProcesses ExecutionProcess[]
}

model ExecutionProcess {
  @@map(name: "execution_processes")

  id                    String              @default(uuid()) @id
  convenientExecution   ConvenientExecution @relation(fields: [convenientExecutionId], references: [id])
  convenientExecutionId String
  executionId           String?
  type                  String?
  date                  DateTime?
  processId             String?
  status                String?
  systemStatus          String?
  system                String?
  accepted              String?
}
